<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>

    //闭包形成的根本原因： 外层函数的作用域对象无法释放
    //如果不用闭包 请尽快释放  比如 变量重新定义 = 0 null

    // function bi() {
    //     var i = 1;  //收到保护 可以重用变量
    //     return function () {
    //         console.log(i++);
    //     };
    // }
    // var xu = bi(); //指向内层函数 b
    // // xu：指向 function () {console.log(i++);};
    // xu();
    // xu();
    // xu();
    // xu=null; //释放闭包

    var num = 2
    var obj = { num: 1 };
    obj.fn = (function (num) {
        this.num += 2;
        num--;
        return function (n) {
            this.num += 2;
            num--;
            console.log(n + ++num);
        }
    })(this.num);
    var fn = obj.fn;
    fn(1); //3
    obj.fn(1);
    console.log(num, obj.num);
</script>

</html>